webpackJsonp([1],{"5Qkr":function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7+uW"),o=i("mvHQ"),r=i.n(o),n=i("sRoY"),s={components:{VueCropper:i.n(n).a},props:["img","blob"],data:function(){return{cropImg:""}},mounted:function(){"function"==typeof FileReader?((new FileReader).onload=function(e){},window.cropper=this.$refs.cropper,this.$refs.cropper.replace(this.img)):alert("Sorry, FileReader API not supported")},methods:{cropImage:function(){this.cropImg=this.$refs.cropper.getCroppedCanvas().toDataURL()},rotate:function(){this.$refs.cropper.rotate(90)}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("hr"),e._v(" "),i("div",{staticStyle:{width:"400px",height:"300px",border:"1px solid gray",display:"inline-block"}},[i("vue-cropper",{ref:"cropper",attrs:{guides:!0,"view-mode":1,"drag-mode":"crop","auto-crop-area":.5,"min-container-width":250,"min-container-height":180,background:!0,rotatable:!0,src:e.src,alt:"Исходное фото","img-style":{width:"400px",height:"300px"}}})],1),e._v(" "),e.cropImg?i("img",{staticStyle:{width:"200px",height:"150px",border:"1px solid gray"},attrs:{src:e.cropImg,alt:"Обработанное фото"}}):e._e(),e._v(" "),i("br"),e._v(" "),i("br"),e._v(" "),""!=e.src?i("button",{staticStyle:{"margin-right":"0px"},on:{click:e.cropImage}},[e._v("Обрезать")]):e._e(),e._v(" "),""!=e.src?i("button",{on:{click:e.rotate}},[e._v("Повернуть")]):e._e()])},staticRenderFns:[]},d={components:{"app-img-crop":i("VU/8")(s,c,!1,null,null,null).exports},name:"app",data:function(){return{video:{},canvas:{},img:null,blob:"",editMode:0}},mounted:function(){this.loadCam()},methods:{cropImage:function(e){console.log("*cropImage=>",arguments)},imageuploaded:function(e){0==e.errcode&&console.log("** RES=>>",e)},edit:function(){var e=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=atob(e),o=[],r=0;r<a.length;r+=i){for(var n=a.slice(r,r+i),s=new Array(n.length),c=0;c<n.length;c++)s[c]=n.charCodeAt(c);var d=new Uint8Array(s);o.push(d)}return new Blob(o,{type:t})}(this.img.replace("data:image/png;base64,",""),"image/png"),t=URL.createObjectURL(e),i=document.createElement("img");i.src=t,this.blob=i,this.editMode=1},del:function(){this.editMode=0,this.img="",this.loadCam()},save:function(){alert(r()(this._data))},capture:function(){this.canvas=this.$refs.canvas;this.canvas.getContext("2d").drawImage(this.video,0,0,640,480);this.img=canvas.toDataURL("image/png")},loadCam:function(){var e=this;this.video=this.$refs.video,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){e.video.src=window.URL.createObjectURL(t),e.video.play()})}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.img,expression:"!img"}]},[i("video",{ref:"video",attrs:{id:"video",width:"640",height:"480",autoplay:""}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.img,expression:"!img"}]},[i("button",{attrs:{id:"snap"},on:{click:function(t){e.capture()}}},[e._v("Сфотографировать")])]),e._v(" "),i("canvas",{ref:"canvas",attrs:{id:"canvas",width:"640",height:"480"}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.img&&0==e.editMode,expression:"img && editMode==0"}]},[i("img",{attrs:{src:e.img,height:"auto"}})]),e._v(" "),e.img&&1==e.editMode?i("div",{attrs:{id:"tui-image-editor"}},[i("app-img-crop",{attrs:{blob:e.blob,img:e.img}})],1):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.img,expression:"img"}]},[i("button",{attrs:{id:"snap"},on:{click:e.del}},[e._v("Переснять")]),e._v(" "),0==e.editMode?i("button",{attrs:{id:"snap"},on:{click:e.edit}},[e._v("Редактировать")]):e._e(),e._v(" "),i("button",{attrs:{id:"snap"},on:{click:e.save}},[e._v("Сохранить")])])])},staticRenderFns:[]};var v=i("VU/8")(d,p,!1,function(e){i("ppFb")},null,null).exports;a.default.config.productionTip=!1,new a.default({el:"#app",components:{App:v},template:"<App/>"})},ppFb:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8503aeeb676be1a9dbdf.js.map